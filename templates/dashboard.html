{% extends 'base.html' %}

{% block content %}
<style>
  /* Modern Dashboard Styles */
  body {
    background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%);
  }

  .dashboard-header {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.95) 0%, rgba(118, 75, 162, 0.95) 100%),
                url('https://images.unsplash.com/photo-1556228578-0d85b1a4d571?w=1200&q=80') center/cover;
    border-radius: 2rem;
    padding: 3rem;
    color: white;
    margin-bottom: 2.5rem;
    box-shadow: 0 20px 60px rgba(102, 126, 234, 0.4);
    position: relative;
    overflow: hidden;
    border: 3px solid rgba(255, 255, 255, 0.2);
  }

  .dashboard-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%);
    z-index: 1;
  }

  .dashboard-header > * {
    position: relative;
    z-index: 2;
  }

  .stat-card {
    border: none;
    border-radius: 1.5rem;
    padding: 2rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    height: 100%;
    background: white;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  }

  .stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, #667eea, #764ba2);
    transition: height 0.3s ease;
  }

  .stat-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 20px 40px rgba(102, 126, 234, 0.25);
  }

  .stat-card:hover::before {
    height: 8px;
  }

  .stat-icon {
    width: 70px;
    height: 70px;
    border-radius: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    margin-bottom: 1.25rem;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    transition: all 0.3s ease;
  }

  .stat-card:hover .stat-icon {
    transform: scale(1.1) rotate(5deg);
  }

  .stat-icon-1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
  .stat-icon-2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
  .stat-icon-3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; }
  .stat-icon-4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; }

  .stat-number {
    font-size: 2.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1;
    margin: 0.5rem 0;
  }

  .stat-label {
    color: #6c757d;
    font-size: 0.9rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .action-card {
    border: none;
    border-radius: 1.5rem;
    padding: 2.5rem;
    color: white;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    text-decoration: none;
    display: block;
    height: 100%;
    position: relative;
    overflow: hidden;
    min-height: 220px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  }

  .action-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-size: cover;
    background-position: center;
    opacity: 0.35;
    transition: all 0.5s ease;
  }

  .action-card.quiz::before {
    background-image: url('https://images.unsplash.com/photo-1570172619644-dfd03ed5d881?w=800&q=80');
  }

  .action-card.products::before {
    background-image: url('https://images.unsplash.com/photo-1596755389378-c31d21fd1273?w=800&q=80');
  }

  .action-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    z-index: 1;
  }

  .action-card.products::after {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  }

  .action-card > * {
    position: relative;
    z-index: 2;
  }

  .action-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.35);
    color: white;
  }

  .action-card:hover::before {
    opacity: 0.6;
    transform: scale(1.15) rotate(2deg);
  }

  .action-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  }

  .action-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  }

  .action-subtitle {
    font-size: 1rem;
    opacity: 0.95;
    text-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
  }

  .product-item {
    padding: 1.25rem;
    border-radius: 1rem;
    transition: all 0.3s ease;
    border: 2px solid rgba(0, 0, 0, 0.05);
    margin-bottom: 1rem;
    background: white;
  }

  .product-item:hover {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
    border-color: rgba(102, 126, 234, 0.3);
    transform: translateX(8px);
    box-shadow: 0 5px 20px rgba(102, 126, 234, 0.15);
  }

  .product-image {
    width: 90px;
    height: 90px;
    border-radius: 1.25rem;
    object-fit: cover;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s ease;
  }

  .product-item:hover .product-image {
    transform: scale(1.05) rotate(2deg);
  }

  .product-placeholder {
    width: 90px;
    height: 90px;
    border-radius: 1.25rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s ease;
  }

  .product-item:hover .product-placeholder {
    transform: scale(1.05) rotate(-2deg);
  }

  .product-brand {
    font-size: 1.15rem;
    color: #333;
    font-weight: 700;
    margin-bottom: 0.25rem;
  }

  .product-name {
    font-size: 0.95rem;
    color: #6c757d;
    margin-bottom: 0.5rem;
  }

  .badge-gradient {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    font-size: 0.75rem;
    padding: 0.35rem 0.75rem;
    border-radius: 0.5rem;
  }

  .badge-type {
    font-size: 0.75rem;
    padding: 0.35rem 0.75rem;
    border-radius: 0.5rem;
  }

  .btn-buy-product {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 0.75rem;
    padding: 0.6rem 1.25rem;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
  }

  .btn-buy-product:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    color: white;
  }

  .section-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    position: relative;
    padding-left: 1rem;
  }

  .section-title::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 24px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 2px;
  }

  .welcome-emoji {
    font-size: 3rem;
    animation: wave 1.5s ease-in-out infinite;
    display: inline-block;
  }

  @keyframes wave {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(20deg); }
    75% { transform: rotate(-20deg); }
  }

  .quick-stat {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.9);
  }

  .hero-image {
    width: 250px;
    height: 250px;
    object-fit: cover;
    border-radius: 50%;
    border: 5px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }

  .feature-badge {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border-radius: 2rem;
    padding: 0.5rem 1.5rem;
    display: inline-block;
    margin-bottom: 1rem;
    font-weight: 600;
  }

  .header-title {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  .header-subtitle {
    font-size: 1.1rem;
    opacity: 0.95;
  }

  .featured-section {
    border: none;
    border-radius: 1.5rem;
    padding: 2.5rem;
    background: white;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08);
  }

  .btn-view-all {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 1rem;
    padding: 1rem 3rem;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
  }

  .btn-view-all:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    color: white;
  }

  .empty-state-icon {
    font-size: 4rem;
    opacity: 0.3;
  }

  /* New Sections Styles */
  .how-it-works-card {
    background: white;
    border-radius: 1.5rem;
    padding: 2rem;
    text-align: center;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    height: 100%;
    border: 2px solid transparent;
  }

  .how-it-works-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.25);
    border-color: rgba(102, 126, 234, 0.3);
  }

  .step-number {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: 700;
    color: white;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
  }

  .skin-type-badge {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    border: 2px solid rgba(102, 126, 234, 0.3);
    border-radius: 1.5rem;
    padding: 2rem 1.5rem;
    text-align: center;
    transition: all 0.3s ease;
    cursor: pointer;
    height: 100%;
  }

  .skin-type-badge:hover {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    transform: scale(1.05);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
  }

  .skin-type-badge:hover .skin-type-icon {
    transform: scale(1.2) rotate(10deg);
  }

  .skin-type-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    display: block;
    transition: all 0.3s ease;
  }

  .testimonial-card {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
    border-radius: 1.5rem;
    padding: 2rem;
    border: 2px solid rgba(102, 126, 234, 0.1);
    transition: all 0.3s ease;
    height: 100%;
  }

  .testimonial-card:hover {
    border-color: rgba(102, 126, 234, 0.3);
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
  }

  .testimonial-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    margin-bottom: 1rem;
    border: 3px solid white;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  }

  .rating-stars {
    color: #fbbf24;
    font-size: 1.2rem;
    margin-bottom: 1rem;
  }

  .info-banner {
    background: linear-gradient(135deg, rgba(67, 233, 123, 0.1) 0%, rgba(56, 249, 215, 0.1) 100%);
    border: 2px solid rgba(67, 233, 123, 0.3);
    border-radius: 1.5rem;
    padding: 2rem;
    margin-bottom: 2rem;
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }

  .info-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    flex-shrink: 0;
  }
</style>

<!-- Welcome Header -->
<div class="dashboard-header animate__animated animate__fadeInDown">
  <div class="row align-items-center">
    <div class="col-md-8">
      <div class="feature-badge">‚ú® Your Skincare Journey</div>
      <h1 class="mb-2 header-title">Welcome back, {{ user.username }}! <span class="welcome-emoji">üëã</span></h1>
      <p class="mb-0 header-subtitle">
        Discover your perfect skin type and get personalized product recommendations
      </p>
      <div class="quick-stat">
        <span>üìÖ {{ today|date:"F d, Y" }}</span>
        <span>‚Ä¢</span>
        <span>üíß {{ product_count }} premium products</span>
        <span>‚Ä¢</span>
        <span>üéØ Personalized for you</span>
      </div>
    </div>
    <div class="col-md-4 text-end d-none d-md-block">
      <img src="https://images.unsplash.com/photo-1598440947619-2c35fc9aa908?w=300&q=80" alt="Skincare" class="hero-image">
      <div class="mt-3">
        <a href="{% url 'admin_dashboard' %}" class="btn btn-light btn-sm" style="border-radius: 2rem; font-weight: 600; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);">
          üìä Admin Analytics
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Stats Cards -->
<div class="row g-4 mb-4">
  <div class="col-md-3 col-sm-6">
    <div class="card stat-card animate__animated animate__fadeInUp">
      <div class="stat-icon stat-icon-1">
        üë•
      </div>
      <div class="stat-number">{{ user_count }}</div>
      <div class="stat-label">Total Users</div>
    </div>
  </div>

  <div class="col-md-3 col-sm-6">
    <div class="card stat-card animate__animated animate__fadeInUp">
      <div class="stat-icon stat-icon-2">
        üíß
      </div>
      <div class="stat-number">{{ product_count }}</div>
      <div class="stat-label">Products</div>
    </div>
  </div>

  <div class="col-md-3 col-sm-6">
    <div class="card stat-card animate__animated animate__fadeInUp">
      <div class="stat-icon stat-icon-3">
        ‚ùì
      </div>
      <div class="stat-number">{{ question_count }}</div>
      <div class="stat-label">Quiz Questions</div>
    </div>
  </div>

  <div class="col-md-3 col-sm-6">
    <div class="card stat-card animate__animated animate__fadeInUp">
      <div class="stat-icon stat-icon-4">
        ‚úÖ
      </div>
      <div class="stat-number">{{ answer_count }}</div>
      <div class="stat-label">Quiz Responses</div>
    </div>
  </div>
</div>

<!-- Quick Actions -->
<div class="row g-4 mb-5">
  <div class="col-md-4">
    <a href="{% url 'quiz_start' %}" class="action-card quiz animate__animated animate__fadeInLeft">
      <div class="action-icon">üß™</div>
      <div class="action-title">Start Skin Quiz</div>
      <div class="action-subtitle">Take our personalized quiz and discover your unique skin type with expert recommendations tailored just for you</div>
    </a>
  </div>

  <div class="col-md-4">
    <a href="{% url 'product_list' %}" class="action-card products animate__animated animate__fadeInUp">
      <div class="action-icon">üõçÔ∏è</div>
      <div class="action-title">Browse Products</div>
      <div class="action-subtitle">Explore {{ product_count }} curated skincare products from top brands, all available on Flipkart</div>
    </a>
  </div>

  <div class="col-md-4">
    <a href="{% url 'track_progress' %}" class="action-card animate__animated animate__fadeInRight" style="background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(32, 201, 151, 0.1) 100%); border-left: 4px solid #28a745;">
      <div class="action-icon">üìä</div>
      <div class="action-title">Track Progress</div>
      <div class="action-subtitle">Monitor your skin condition and satisfaction over time with beautiful charts and insights</div>
    </a>
  </div>
</div>

<!-- Info Banner -->
<div class="info-banner animate__animated animate__fadeIn">
  <div class="info-icon">üí°</div>
  <div>
    <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 0.5rem; color: #333;">Did You Know?</h3>
    <p style="margin: 0; color: #666; font-size: 1rem;">Your skin type can change with seasons, age, and lifestyle. Retake the quiz every 3-6 months for updated recommendations!</p>
  </div>
</div>

<!-- How It Works Section -->
<div class="row mb-5">
  <div class="col-12">
    <div class="featured-section">
      <h2 class="section-title">üéØ How It Works</h2>
      <div class="row g-4 mt-3">
        <div class="col-md-3">
          <div class="how-it-works-card">
            <div class="step-number">1</div>
            <h4 style="font-weight: 700; color: #333; margin-bottom: 1rem;">Take the Quiz</h4>
            <p style="color: #666; font-size: 0.95rem;">Answer 5 simple questions about your skin concerns and characteristics</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="how-it-works-card">
            <div class="step-number">2</div>
            <h4 style="font-weight: 700; color: #333; margin-bottom: 1rem;">Get Analysis</h4>
            <p style="color: #666; font-size: 0.95rem;">Our AI analyzes your responses to determine your unique skin type</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="how-it-works-card">
            <div class="step-number">3</div>
            <h4 style="font-weight: 700; color: #333; margin-bottom: 1rem;">View Results</h4>
            <p style="color: #666; font-size: 0.95rem;">Discover personalized product recommendations perfect for you</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="how-it-works-card">
            <div class="step-number">4</div>
            <h4 style="font-weight: 700; color: #333; margin-bottom: 1rem;">Shop & Glow</h4>
            <p style="color: #666; font-size: 0.95rem;">Buy recommended products directly from Flipkart with one click</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Skin Types Section -->
<div class="row mb-5">
  <div class="col-12">
    <div class="featured-section">
      <h2 class="section-title">üåü Explore Skin Types</h2>
      <div class="row g-4 mt-3">
        <div class="col-md-2 col-6">
          <a href="{% url 'product_list' %}?skin_type=dry" class="text-decoration-none">
            <div class="skin-type-badge">
              <span class="skin-type-icon">üíß</span>
              <h5 style="font-weight: 700; margin: 0;">Dry</h5>
            </div>
          </a>
        </div>
        <div class="col-md-2 col-6">
          <a href="{% url 'product_list' %}?skin_type=oily" class="text-decoration-none">
            <div class="skin-type-badge">
              <span class="skin-type-icon">‚ú®</span>
              <h5 style="font-weight: 700; margin: 0;">Oily</h5>
            </div>
          </a>
        </div>
        <div class="col-md-2 col-6">
          <a href="{% url 'product_list' %}?skin_type=combination" class="text-decoration-none">
            <div class="skin-type-badge">
              <span class="skin-type-icon">üåó</span>
              <h5 style="font-weight: 700; margin: 0;">Combo</h5>
            </div>
          </a>
        </div>
        <div class="col-md-2 col-6">
          <a href="{% url 'product_list' %}?skin_type=sensitive" class="text-decoration-none">
            <div class="skin-type-badge">
              <span class="skin-type-icon">üå∫</span>
              <h5 style="font-weight: 700; margin: 0;">Sensitive</h5>
            </div>
          </a>
        </div>
        <div class="col-md-2 col-6">
          <a href="{% url 'product_list' %}?skin_type=normal" class="text-decoration-none">
            <div class="skin-type-badge">
              <span class="skin-type-icon">üòä</span>
              <h5 style="font-weight: 700; margin: 0;">Normal</h5>
            </div>
          </a>
        </div>
        <div class="col-md-2 col-6">
          <a href="{% url 'product_list' %}" class="text-decoration-none">
            <div class="skin-type-badge">
              <span class="skin-type-icon">üåà</span>
              <h5 style="font-weight: 700; margin: 0;">View All</h5>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Testimonials Section -->
<div class="row mb-5">
  <div class="col-12">
    <div class="featured-section">
      <h2 class="section-title">üí¨ What Our Users Say</h2>
      <div class="row g-4 mt-3">
        <div class="col-md-4">
          <div class="testimonial-card">
            <div class="testimonial-avatar">üë©</div>
            <div class="rating-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p style="color: #666; font-style: italic; margin-bottom: 1rem;">"Finally found products perfect for my sensitive skin! The quiz was super accurate and easy to use."</p>
            <h5 style="font-weight: 700; color: #333; margin-bottom: 0.25rem;">Priya Sharma</h5>
            <p style="color: #999; font-size: 0.9rem; margin: 0;">Dry Skin</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="testimonial-card">
            <div class="testimonial-avatar">üßë</div>
            <div class="rating-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p style="color: #666; font-style: italic; margin-bottom: 1rem;">"Amazing recommendations! My skin has never looked better. The product quality is top-notch."</p>
            <h5 style="font-weight: 700; color: #333; margin-bottom: 0.25rem;">Rahul Verma</h5>
            <p style="color: #999; font-size: 0.9rem; margin: 0;">Oily Skin</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="testimonial-card">
            <div class="testimonial-avatar">üë©</div>
            <div class="rating-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p style="color: #666; font-style: italic; margin-bottom: 1rem;">"Love how personalized the experience is! Got my perfect skincare routine in just 2 minutes."</p>
            <h5 style="font-weight: 700; color: #333; margin-bottom: 0.25rem;">Ananya Desai</h5>
            <p style="color: #999; font-size: 0.9rem; margin: 0;">Combination Skin</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Recent Products -->
<div class="row">
  <div class="col-12">
    <div class="card featured-section">
      <h2 class="section-title">‚ú® Featured Products</h2>
      
      {% if recent_products %}
        <div class="row">
          {% for p in recent_products %}
            <div class="col-md-6">
              <div class="product-item">
                <div class="d-flex align-items-center gap-3">
                  {% if p.image %}
                    <img src="{{ p.image.url }}" alt="{{ p.name }}" class="product-image"/>
                  {% else %}
                    <div class="product-placeholder">üíß</div>
                  {% endif %}
                  <div class="flex-grow-1">
                    <div class="product-brand">{{ p.brand }}</div>
                    <div class="product-name">{{ p.name }}</div>
                    <div class="mt-1">
                      <span class="badge badge-gradient text-white">
                        {{ p.skin_type|title }}
                      </span>
                      <span class="badge badge-type bg-light text-dark">{{ p.product_type }}</span>
                    </div>
                  </div>
                  {% if p.link %}
                    <a href="{{ p.link }}" target="_blank" class="btn btn-sm btn-buy-product">
                      üõí Buy
                    </a>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
        
        <div class="text-center mt-4">
          <a href="{% url 'product_list' %}" class="btn btn-lg btn-view-all">
            View All {{ product_count }} Products ‚Üí
          </a>
        </div>
      {% else %}
        <div class="text-center py-5">
          <div class="empty-state-icon">üì¶</div>
          <p class="text-muted mt-3">No products available yet.</p>
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
